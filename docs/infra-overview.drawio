<?xml version="1.0" encoding="UTF-8"?>
<mxfile>
  <diagram name="m1sk9 Infrastructure" id="infra-overview">
    <mxGraphModel dx="1400" dy="900" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1600" pageHeight="1000" math="0" shadow="0">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>

        <!-- Title -->
        <mxCell id="title" value="m1sk9/infra - Infrastructure Overview" style="text;html=1;fontSize=20;fontStyle=1;align=center;verticalAlign=middle;" vertex="1" parent="1">
          <mxGeometry x="500" y="20" width="500" height="40" as="geometry"/>
        </mxCell>

        <!-- GitHub Repository -->
        <mxCell id="gh-group" value="GitHub (m1sk9/infra)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=14;fontStyle=1;verticalAlign=top;spacingTop=5;" vertex="1" parent="1">
          <mxGeometry x="40" y="90" width="340" height="280" as="geometry"/>
        </mxCell>
        <mxCell id="ci" value="&lt;b&gt;CI&lt;/b&gt;&lt;br&gt;(Pull Request)&lt;br&gt;&lt;hr&gt;terraform fmt&lt;br&gt;tflint&lt;br&gt;terraform validate&lt;br&gt;terraform plan" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontSize=11;align=center;" vertex="1" parent="1">
          <mxGeometry x="60" y="140" width="140" height="130" as="geometry"/>
        </mxCell>
        <mxCell id="cd" value="&lt;b&gt;CD&lt;/b&gt;&lt;br&gt;(Push to main)&lt;br&gt;&lt;hr&gt;terraform plan&lt;br&gt;terraform apply" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontSize=11;align=center;" vertex="1" parent="1">
          <mxGeometry x="220" y="140" width="140" height="130" as="geometry"/>
        </mxCell>
        <mxCell id="gh-actions-label" value="GitHub Actions" style="text;html=1;fontSize=10;fontStyle=2;align=center;fontColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="100" y="280" width="200" height="20" as="geometry"/>
        </mxCell>
        <mxCell id="lefthook" value="lefthook (pre-commit)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontSize=10;align=center;" vertex="1" parent="1">
          <mxGeometry x="110" y="305" width="160" height="30" as="geometry"/>
        </mxCell>

        <!-- HCP Terraform -->
        <mxCell id="tf-cloud" value="&lt;b&gt;HCP Terraform&lt;/b&gt;&lt;br&gt;&lt;hr&gt;Org: m1sk9-terraform-org&lt;br&gt;Workspace: infra&lt;br&gt;(State Management)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=11;align=center;" vertex="1" parent="1">
          <mxGeometry x="480" y="120" width="200" height="100" as="geometry"/>
        </mxCell>

        <!-- Arrow: CD -> HCP Terraform -->
        <mxCell id="e-cd-tf" style="edgeStyle=orthogonalEdgeStyle;rounded=1;strokeColor=#9673a6;" edge="1" source="cd" target="tf-cloud" parent="1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="e-cd-tf-label" value="state" style="edgeLabel;html=1;fontSize=9;fontColor=#9673a6;" vertex="1" connectable="0" parent="e-cd-tf">
          <mxGeometry x="-0.1" relative="1" as="geometry"/>
        </mxCell>

        <!-- Cloudflare DNS Zone -->
        <mxCell id="cf-group" value="Cloudflare DNS (m1sk9.dev)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=14;fontStyle=1;verticalAlign=top;spacingTop=5;" vertex="1" parent="1">
          <mxGeometry x="440" y="280" width="720" height="320" as="geometry"/>
        </mxCell>

        <!-- CNAME Records -->
        <mxCell id="cname-group" value="&lt;b&gt;CNAME Records&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF9E6;strokeColor=#d6b656;fontSize=11;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="460" y="320" width="220" height="170" as="geometry"/>
        </mxCell>
        <mxCell id="cname-portfolio" value="m1sk9.dev → m1sk9.github.io" style="rounded=0;whiteSpace=wrap;html=1;fontSize=9;fillColor=#FFFFFF;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="470" y="350" width="200" height="25" as="geometry"/>
        </mxCell>
        <mxCell id="cname-babyrite" value="babyrite.api → m1sk9.github.io" style="rounded=0;whiteSpace=wrap;html=1;fontSize=9;fillColor=#FFFFFF;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="470" y="380" width="200" height="25" as="geometry"/>
        </mxCell>
        <mxCell id="cname-lc-api" value="lc.api → m1sk9.github.io" style="rounded=0;whiteSpace=wrap;html=1;fontSize=9;fillColor=#FFFFFF;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="470" y="410" width="200" height="25" as="geometry"/>
        </mxCell>
        <mxCell id="cname-dkim" value="protonmail DKIM x3" style="rounded=0;whiteSpace=wrap;html=1;fontSize=9;fillColor=#FFFFFF;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="470" y="440" width="200" height="25" as="geometry"/>
        </mxCell>

        <!-- AAAA Records (Proxied) -->
        <mxCell id="aaaa-group" value="&lt;b&gt;AAAA Records (Proxied)&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF9E6;strokeColor=#d6b656;fontSize=11;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="700" y="320" width="200" height="140" as="geometry"/>
        </mxCell>
        <mxCell id="aaaa-blog" value="blog.m1sk9.dev → 100::" style="rounded=0;whiteSpace=wrap;html=1;fontSize=9;fillColor=#FFFFFF;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="710" y="350" width="180" height="25" as="geometry"/>
        </mxCell>
        <mxCell id="aaaa-lc" value="lc.m1sk9.dev → 100::" style="rounded=0;whiteSpace=wrap;html=1;fontSize=9;fillColor=#FFFFFF;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="710" y="380" width="180" height="25" as="geometry"/>
        </mxCell>
        <mxCell id="aaaa-ua" value="ua.m1sk9.dev → 100::" style="rounded=0;whiteSpace=wrap;html=1;fontSize=9;fillColor=#FFFFFF;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="710" y="410" width="180" height="25" as="geometry"/>
        </mxCell>

        <!-- MX + Mail -->
        <mxCell id="mx-group" value="&lt;b&gt;MX Records&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF9E6;strokeColor=#d6b656;fontSize=11;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="700" y="480" width="200" height="80" as="geometry"/>
        </mxCell>
        <mxCell id="mx1" value="mail.protonmail.ch (pri:10)" style="rounded=0;whiteSpace=wrap;html=1;fontSize=9;fillColor=#FFFFFF;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="710" y="505" width="180" height="20" as="geometry"/>
        </mxCell>
        <mxCell id="mx2" value="mailsec.protonmail.ch (pri:20)" style="rounded=0;whiteSpace=wrap;html=1;fontSize=9;fillColor=#FFFFFF;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="710" y="530" width="180" height="20" as="geometry"/>
        </mxCell>

        <!-- TXT Records -->
        <mxCell id="txt-group" value="&lt;b&gt;TXT Records&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF9E6;strokeColor=#d6b656;fontSize=11;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="920" y="320" width="220" height="200" as="geometry"/>
        </mxCell>
        <mxCell id="txt-ghp" value="GitHub Pages verification" style="rounded=0;whiteSpace=wrap;html=1;fontSize=9;fillColor=#FFFFFF;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="930" y="350" width="200" height="22" as="geometry"/>
        </mxCell>
        <mxCell id="txt-bsky" value="Bluesky (_atproto)" style="rounded=0;whiteSpace=wrap;html=1;fontSize=9;fillColor=#FFFFFF;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="930" y="377" width="200" height="22" as="geometry"/>
        </mxCell>
        <mxCell id="txt-discord" value="Discord verification" style="rounded=0;whiteSpace=wrap;html=1;fontSize=9;fillColor=#FFFFFF;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="930" y="404" width="200" height="22" as="geometry"/>
        </mxCell>
        <mxCell id="txt-dmarc" value="DMARC (p=quarantine)" style="rounded=0;whiteSpace=wrap;html=1;fontSize=9;fillColor=#FFFFFF;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="930" y="431" width="200" height="22" as="geometry"/>
        </mxCell>
        <mxCell id="txt-spf" value="Proton Mail SPF + verification" style="rounded=0;whiteSpace=wrap;html=1;fontSize=9;fillColor=#FFFFFF;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="930" y="458" width="200" height="22" as="geometry"/>
        </mxCell>

        <!-- Arrow: CD -> Cloudflare -->
        <mxCell id="e-cd-cf" style="edgeStyle=orthogonalEdgeStyle;rounded=1;strokeColor=#d6b656;strokeWidth=2;" edge="1" source="cd" target="cf-group" parent="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="400" y="200"/>
              <mxPoint x="400" y="260"/>
              <mxPoint x="800" y="260"/>
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="e-cd-cf-label" value="terraform apply" style="edgeLabel;html=1;fontSize=9;fontColor=#d6b656;fontStyle=1;" vertex="1" connectable="0" parent="e-cd-cf">
          <mxGeometry x="-0.2" relative="1" as="geometry"/>
        </mxCell>

        <!-- Dockge / Server -->
        <mxCell id="server-group" value="Self-hosted Server" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=14;fontStyle=1;verticalAlign=top;spacingTop=5;" vertex="1" parent="1">
          <mxGeometry x="40" y="430" width="340" height="210" as="geometry"/>
        </mxCell>
        <mxCell id="dockge" value="&lt;b&gt;Dockge&lt;/b&gt; (louislam/dockge:1.5.0)&lt;br&gt;Port: 5001&lt;br&gt;Container Management UI" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#82b366;fontSize=11;align=center;" vertex="1" parent="1">
          <mxGeometry x="60" y="470" width="200" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="docker" value="&lt;b&gt;Docker Containers&lt;/b&gt;&lt;br&gt;(/opt/stacks)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#82b366;fontSize=11;align=center;" vertex="1" parent="1">
          <mxGeometry x="60" y="550" width="200" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="docker-sock" value="docker.sock" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#82b366;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="280" y="480" width="80" height="30" as="geometry"/>
        </mxCell>

        <!-- Arrow: Dockge -> Docker -->
        <mxCell id="e-dockge-docker" style="rounded=1;strokeColor=#82b366;" edge="1" source="dockge" target="docker" parent="1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="e-dockge-sock" style="rounded=1;strokeColor=#82b366;dashed=1;" edge="1" source="dockge" target="docker-sock" parent="1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- External Services -->
        <mxCell id="ext-ghpages" value="&lt;b&gt;GitHub Pages&lt;/b&gt;&lt;br&gt;m1sk9.github.io" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=10;align=center;" vertex="1" parent="1">
          <mxGeometry x="480" y="640" width="150" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="ext-proton" value="&lt;b&gt;Proton Mail&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=10;align=center;" vertex="1" parent="1">
          <mxGeometry x="700" y="640" width="120" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="ext-social" value="&lt;b&gt;Bluesky / Discord&lt;/b&gt;&lt;br&gt;(domain verification)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=10;align=center;" vertex="1" parent="1">
          <mxGeometry x="890" y="640" width="150" height="50" as="geometry"/>
        </mxCell>

        <!-- Arrows: DNS -> External -->
        <mxCell id="e-cname-ghp" style="rounded=1;strokeColor=#b85450;dashed=1;" edge="1" source="cname-portfolio" target="ext-ghpages" parent="1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="e-mx-proton" style="rounded=1;strokeColor=#b85450;dashed=1;" edge="1" source="mx-group" target="ext-proton" parent="1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="e-txt-social" style="rounded=1;strokeColor=#b85450;dashed=1;" edge="1" source="txt-bsky" target="ext-social" parent="1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- Legend -->
        <mxCell id="legend" value="&lt;b&gt;Legend&lt;/b&gt;&lt;br&gt;Blue: GitHub / CI/CD&lt;br&gt;Yellow: Cloudflare DNS&lt;br&gt;Green: Self-hosted Server&lt;br&gt;Red: External Services&lt;br&gt;Purple: HCP Terraform" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#CCCCCC;fontSize=10;align=left;spacingLeft=10;" vertex="1" parent="1">
          <mxGeometry x="40" y="680" width="170" height="110" as="geometry"/>
        </mxCell>

        <!-- Terraform manages label -->
        <mxCell id="tf-label" value="Terraform (Cloudflare Provider v5.17.0)" style="text;html=1;fontSize=10;fontStyle=3;align=center;fontColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="440" y="605" width="300" height="20" as="geometry"/>
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
